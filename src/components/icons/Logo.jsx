import React from 'react'
// @ts-ignore
import anime from 'animejs/lib/anime.es.js'

// interface Props {
//     finishLoading: () => void
// }

const Logo = ({ finishLoading }) => {
    // These values were obtained from measurements made in inkscape
    // They can be progmatically calculated using getBBox().x
    const rightBracketOffset = 146
    const leftBracketOffset = -142

    const bracketsAppear = {
        delay: 250,
        opacity: 1,
        duration: 500,
        easing: 'easeInExpo',
    }

    const bracketsOpen = {
        delay: 400,
        duration: 800,
        easing: 'easeOutExpo',
    }

    const nameAppearsStroke = {
        strokeDashoffset: [anime.setDashoffset, 0],
        easing: 'easeInOutSine',
        duration: 1200,
    }

    const nameAppearsFill = {
        targets: '.fill',
        fillOpacity: 1,
        delay: 1000,
        duration: 1000,
    }

    const nameStrokeDisappears = {
        strokeOpacity: 0,
        duration: nameAppearsFill.duration,
    }

    const nameFillDisappears = {
        duration: 100,
        opacity: 0,
    }

    const bracketsCollapse = {
        delay: 250,
        duration: 1200,
        translateX: 0,
        easing: 'easeOutElastic(1, 1)',
    }

    const slashAppears = {
        targets: '.slash',
        delay: 1000,
        duration: 1000,
        opacity: 1,
    }

    const animateLoader = () => {
        const leftBracketTimeline = anime.timeline({
            targets: '.left',
            begin: () => {
                //console.time();
            },
            complete: () => {
                //console.timeEnd();
                finishLoading()
            },
        })

        leftBracketTimeline
            .add({
                ...bracketsAppear,
            })
            .add({
                ...bracketsOpen,
                translateX: leftBracketOffset,
            })
            .add({
                targets: '.firstname.fill',
                ...nameAppearsStroke,
                begin: () => {
                    const paths = document.querySelectorAll('.name')
                    paths.forEach(path => {
                        path.setAttribute('style', 'stroke-opacity: 1')
                    })
                    anime({
                        targets: '.firstname.fill',
                        ...nameAppearsFill,
                    })
                },
            })
            .add({
                targets: '.firstname.fill',
                ...nameStrokeDisappears,
            })
            .add({
                targets: '.firstname.fill',
                ...nameFillDisappears,
                delay: anime.stagger(50, { start: 200 }),
                begin: () => {
                    anime({
                        targets: '.left',
                        ...bracketsCollapse,
                    })
                },
            })
            .add({
                ...slashAppears,
            })
            .add({
                targets: '.svg',
                duration: 100,
                scale: 1.1,
                easing: 'easeInOutQuart',
            })
            .add({
                targets: '.svg',
                duration: 200,
                scale: 0,
                easing: 'easeInOutQuart',
            })

        const rightBracketTimeline = anime.timeline({
            targets: '.right',
        })

        rightBracketTimeline
            .add({
                ...bracketsAppear,
            })
            .add({
                ...bracketsOpen,
                translateX: rightBracketOffset,
            })
            .add({
                targets: '.surname.fill',
                ...nameAppearsStroke,
                begin: () => {
                    anime({
                        targets: 'surnname.fill',
                        ...nameAppearsFill,
                    })
                },
            })
            .add({
                targets: '.surname.fill',
                ...nameStrokeDisappears,
            })
            .add({
                targets: '.surname.fill',
                ...nameFillDisappears,
                delay: anime.stagger(50, { start: 200, direction: 'reverse' }),
                begin: () => {
                    anime({
                        targets: '.right',
                        ...bracketsCollapse,
                    })
                },
            })
    }

    React.useEffect(() => {
        animateLoader()
    }, [])

    return (
        <svg
            viewBox='0 0 380 40'
            xmlns='http://www.w3.org/2000/svg'
            className='svg h-[5rem]'
        >
            <g id='layer1'>
                <g id='g158603'>
                    {/* K */}
                    <path
                        className='firstname name fill'
                        d='m 40.977156,0.5006 h 3.710938 v 17.59765 l 9.433594,-9.08203 h 4.375 l -8.613282,8.24219 9.960938,13.632813 H 55.449813 L 47.363875,19.60216 44.688094,22.121691 v 8.769532 h -3.710938 z'
                        id='fn_k_fill'
                    />

                    {/* I */}
                    <path
                        className='firstname name fill'
                        d='m 70.859969,5.05138 q -0.585938,0 -0.585938,-0.58594 v -3.3789 q 0,-0.58594 0.585938,-0.58594 h 2.8125 q 0.585937,0 0.585937,0.58594 v 3.3789 q 0,0.58594 -0.585937,0.58594 z m 6.5625,25.996093 q -3.222656,0 -5,-2.070313 -1.757813,-2.089844 -1.757813,-5.859375 V 11.82872 H 65.8795 v -2.8125 h 8.378906 v 14.101565 q 0,2.382813 0.898438,3.632813 0.898437,1.25 2.617187,1.25 h 4.199219 v 3.046875 z'
                        id='fn_i_fill'
                    />

                    {/* E */}
                    <path
                        className='firstname name fill'
                        d='m 97.969344,31.457629 q -5.058594,0 -7.949219,-3.027344 -2.871094,-3.046875 -2.871094,-8.300785 0,-3.26171 1.132813,-5.89843 1.152344,-2.63672 3.398437,-4.17969 2.265625,-1.5625 5.585938,-1.5625 4.374991,0 6.777341,2.8125 2.42187,2.79297 2.42187,7.75391 V 20.8131 H 90.899031 v 0.11719 q 0,3.417964 1.796875,5.449214 1.796875,2.03125 5.3125,2.03125 2.031244,0 3.925774,-0.644531 1.91406,-0.644532 3.69141,-1.5625 v 3.574218 q -1.85547,0.761719 -3.76953,1.210938 -1.894525,0.46875 -3.886716,0.46875 z M 102.87168,18.0006 q 0,-1.81641 -0.54687,-3.28125 -0.54688,-1.46485 -1.75781,-2.32422 -1.191405,-0.85938 -3.164062,-0.85938 -1.992188,0 -3.339844,0.87891 -1.328125,0.85938 -2.089844,2.32422 -0.742187,1.46484 -0.9375,3.26172 z'
                        id='fn_e_fill'
                    />

                    {/* R */}
                    <path
                        className='firstname name fill'
                        d='m 114.70762,9.01622 h 3.26172 l 0.35156,4.27735 q 0.91797,-2.32422 2.75391,-3.55469 1.85547,-1.25 4.43359,-1.25 2.69531,0 4.6875,1.36719 v 3.67187 q -2.10937,-1.71875 -5,-1.71875 -3.32031,0 -5.09766,2.12891 -1.77734,2.10937 -1.77734,6.07422 v 10.878903 h -3.61328 z'
                        id='fn_r_fill'
                    />

                    {/* A */}
                    <path
                        className='firstname name fill'
                        d='m 142.83262,31.457629 q -3.16407,0 -5.23438,-1.816406 -2.05078,-1.835938 -2.05078,-5.253907 0,-2.832031 1.36719,-4.414066 1.36718,-1.60156 3.57422,-2.24609 2.20703,-0.64453 4.70703,-0.64453 h 4.82422 v -0.56641 q 0,-2.79297 -1.42579,-3.88672 -1.40625,-1.09375 -3.96484,-1.09375 -1.99219,0 -3.90625,0.54688 -1.91406,0.54687 -3.57421,1.52344 v -3.59375 q 1.79687,-0.66407 3.6328,-1.09375 1.83594,-0.42969 3.75,-0.42969 1.95313,0 3.78907,0.54687 1.85547,0.52735 3.20312,1.75782 1.34766,1.21093 1.79688,3.26172 0.3125,1.44531 0.3125,4.35546 v 4.47266 q 0,1.835938 0.19531,4.0625 0.21484,2.226563 0.95703,3.945313 h -3.61328 q -0.33203,-0.761719 -0.52734,-1.621094 -0.19532,-0.878906 -0.3125,-1.699219 -1.15235,1.972656 -3.20313,2.929688 -2.03125,0.957031 -4.29687,0.957031 z m 0.8789,-3.007813 q 2.22656,0 3.61328,-1.09375 1.40625,-1.09375 2.05078,-2.851562 0.64454,-1.777344 0.64454,-3.808594 v -0.80078 h -4.55079 q -1.52343,0 -2.98828,0.35156 -1.44531,0.33203 -2.40234,1.289064 -0.9375,0.957031 -0.9375,2.792969 0,2.070312 1.26953,3.105468 1.26953,1.015625 3.30078,1.015625 z'
                        id='fn_a_fill'
                    />

                    {/* N */}
                    <path
                        className='firstname name fill'
                        d='m 160.78183,9.01622 h 3.24219 l 0.35156,3.28125 q 1.97266,-3.80859 6.42579,-3.80859 6.69921,0 6.69921,8.84766 V 30.891223 H 173.8873 V 17.33654 q 0,-2.94922 -1.03515,-4.33594 -1.01563,-1.38672 -3.16407,-1.38672 -2.55859,0 -3.94531,1.81641 -1.36719,1.79687 -1.36719,5.09765 v 12.363283 h -3.59375 z'
                        id='fn_n_fill'
                    />
                </g>
                <g id='g158534'>
                    {/* D */}
                    <path
                        className='surname name fill'
                        d='m 210.91865,31.457629 q -2.38282,0 -4.00391,-1.015625 -1.62109,-1.015625 -2.59766,-2.714844 -0.95703,-1.699219 -1.38672,-3.75 -0.42968,-2.070312 -0.42968,-4.16016 0,-5.23437 2.28515,-8.28125 2.30469,-3.04687 6.21094,-3.04687 1.91406,0 3.4375,0.82031 1.52344,0.80078 2.42188,2.5 V 0.5006 h 3.59375 v 30.390623 h -3.24219 l -0.35156,-2.753907 q -1.9336,3.320313 -5.9375,3.320313 z m 0.64453,-3.046875 q 1.69922,0 2.73437,-0.800781 1.05469,-0.800782 1.60156,-2.070313 0.56641,-1.289062 0.76172,-2.753906 0.19532,-1.484375 0.19532,-2.832034 0,-1.32812 -0.19532,-2.79297 -0.19531,-1.46484 -0.76172,-2.73437 -0.54687,-1.28906 -1.60156,-2.08984 -1.03515,-0.80079 -2.73437,-0.80079 -1.71875,0 -2.77344,0.80079 -1.03516,0.80078 -1.58203,2.08984 -0.52735,1.26953 -0.72266,2.73437 -0.19531,1.46485 -0.19531,2.79297 0,1.328128 0.19531,2.812503 0.19531,1.464843 0.72266,2.753906 0.54687,1.269531 1.58203,2.089844 1.05469,0.800781 2.77344,0.800781 z'
                        id='sn_d_fill'
                    />

                    {/* A */}
                    <path
                        className='surname name fill'
                        d='m 234.12177,31.457629 q -3.16406,0 -5.23437,-1.816406 -2.05079,-1.835938 -2.05079,-5.253907 0,-2.832031 1.36719,-4.414066 1.36719,-1.60156 3.57422,-2.24609 2.20703,-0.64453 4.70703,-0.64453 h 4.82422 v -0.56641 q 0,-2.79297 -1.42578,-3.88672 -1.40625,-1.09375 -3.96484,-1.09375 -1.99219,0 -3.90625,0.54688 -1.91407,0.54687 -3.57422,1.52344 v -3.59375 q 1.79687,-0.66407 3.63281,-1.09375 1.83594,-0.42969 3.75,-0.42969 1.95312,0 3.78906,0.54687 1.85547,0.52735 3.20313,1.75782 1.34765,1.21093 1.79687,3.26172 0.3125,1.44531 0.3125,4.35546 v 4.47266 q 0,1.835938 0.19531,4.0625 0.21485,2.226563 0.95704,3.945313 h -3.61329 q -0.33203,-0.761719 -0.52734,-1.621094 -0.19531,-0.878906 -0.3125,-1.699219 -1.15234,1.972656 -3.20312,2.929688 -2.03125,0.957031 -4.29688,0.957031 z m 0.87891,-3.007813 q 2.22656,0 3.61328,-1.09375 1.40625,-1.09375 2.05078,-2.851562 0.64453,-1.777344 0.64453,-3.808594 v -0.80078 h -4.55078 q -1.52344,0 -2.98828,0.35156 -1.44531,0.33203 -2.40235,1.289064 -0.9375,0.957031 -0.9375,2.792969 0,2.070312 1.26954,3.105468 1.26953,1.015625 3.30078,1.015625 z'
                        id='sn_a_fill'
                    />

                    {/* N */}
                    <path
                        className='surname name fill'
                        d='m 252.07099,9.01622 h 3.24219 l 0.35156,3.28125 q 1.97266,-3.80859 6.42578,-3.80859 6.69922,0 6.69922,8.84766 v 13.554683 h -3.61328 V 17.33654 q 0,-2.94922 -1.03516,-4.33594 -1.01562,-1.38672 -3.16406,-1.38672 -2.55859,0 -3.94531,1.81641 -1.36719,1.79687 -1.36719,5.09765 v 12.363283 h -3.59375 z'
                        id='sn_n_fill'
                    />

                    {/* S */}
                    <path
                        className='surname name fill'
                        d='m 283.84833,31.457629 q -3.125,0 -7.34375,-1.367188 v -3.710937 q 4.10157,2.070312 7.30469,2.070312 2.28516,0 3.65234,-0.957031 1.36719,-0.957031 1.36719,-2.558594 0,-1.386718 -1.15234,-2.226562 -1.13281,-0.859375 -3.63281,-1.386719 l -1.50391,-0.3125 q -3.08594,-0.625 -4.53125,-2.05078 -1.42578,-1.44531 -1.42578,-3.92578 0,-3.14453 2.14844,-4.84375 2.14843,-1.69922 6.11328,-1.69922 3.35937,0 6.5039,1.28906 v 3.51563 q -3.0664,-1.79688 -6.40625,-1.79688 -4.72656,0 -4.72656,3.22266 0,1.05469 0.41016,1.67969 0.41015,0.60546 1.5625,1.03515 1.15234,0.41016 3.39843,0.85938 l 1.44532,0.27343 q 5.42968,1.07422 5.42968,5.917973 0,3.242187 -2.30468,5.117187 -2.30469,1.855469 -6.3086,1.855469 z'
                        id='sn_s_fill'
                    />

                    {/* E */}
                    <path
                        className='surname name fill'
                        d='m 309.66865,31.457629 q -5.0586,0 -7.94922,-3.027344 -2.8711,-3.046875 -2.8711,-8.300785 0,-3.26171 1.13282,-5.89843 1.15234,-2.63672 3.39843,-4.17969 2.26563,-1.5625 5.58594,-1.5625 4.375,0 6.77734,2.8125 2.42188,2.79297 2.42188,7.75391 v 1.75781 h -15.56641 v 0.11719 q 0,3.417964 1.79688,5.449214 1.79687,2.03125 5.3125,2.03125 2.03125,0 3.92578,-0.644531 1.91406,-0.644532 3.69141,-1.5625 v 3.574218 q -1.85547,0.761719 -3.76954,1.210938 -1.89453,0.46875 -3.88671,0.46875 z M 314.57099,18.0006 q 0,-1.81641 -0.54688,-3.28125 -0.54687,-1.46485 -1.75781,-2.32422 -1.1914,-0.85938 -3.16406,-0.85938 -1.99219,0 -3.33984,0.87891 -1.32813,0.85938 -2.08985,2.32422 -0.74219,1.46484 -0.9375,3.26172 z'
                        id='sn_e_fill'
                    />

                    {/* Y */}
                    <path
                        className='surname name fill'
                        d='m 324.10224,36.203723 h 2.12891 q 1.58203,0 2.4414,-0.898438 0.95703,-0.996094 2.32422,-4.765625 L 322.53974,9.01622 h 3.80859 l 6.48438,17.109378 6.38672,-17.109378 h 3.80859 l -5.76172,14.843753 q -0.68359,1.757812 -1.1914,3.066406 -0.15625,0.390625 -0.25391,0.625 -0.0781,0.214844 -0.21484,0.566406 -0.11719,0.351563 -0.39063,1.132813 l -0.23437,0.625 q -0.76172,2.128906 -1.44532,3.730468 -0.66406,1.621094 -1.13281,2.441407 -1.75781,3.164062 -5.41016,3.164062 h -2.89062 z'
                        id='sn_y_fill'
                    />
                </g>

                <path
                    className='left'
                    d='m 178,30.52 -19.4,-8.56 v -2.8 L 178,9.4799995 V 14.16 l -13.36,6.2 13.36,5.48 z'
                    id='path158713'
                />
                <path
                    className='right'
                    d='M 202,25.556564 217.52734,20.029221 202,14.462814 V 9.5800018 l 20.64453,8.1250002 v 4.609375 L 202,30.419846 Z'
                    id='path158765'
                />
                <path
                    className='bracket slash'
                    d='m 195.51758,3.5644531 h 4.3164 L 184.48242,36.435547 h -4.3164 z'
                    id='path158739'
                />
            </g>
        </svg>
    )
}

export default Logo
